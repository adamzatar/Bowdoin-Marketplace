@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- Tailwind v4 token declarations (resolve bg-bg, text-foreground, etc.) --- */
@theme {
  /* Core brand + UI tokens */
  --color-bg: var(--bg);
  --color-surface: var(--surface);
  --color-card: var(--card);
  --color-popover: var(--popover);
  --color-border: var(--border);
  --color-input: var(--input);

  --color-foreground: var(--foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-ring: var(--ring);
  --color-focus: var(--focus);

  --radius: var(--radius);
  --radius-lg: var(--radius-lg);
  --radius-md: var(--radius-md);
  --radius-sm: var(--radius-sm);

  --shadow-card: var(--shadow-card);
  --animate-skeleton: var(--animate-skeleton);
}

/* ================================
   Bowdoin Theme Tokens (CSS Vars)
   ================================ */
:root {
  /* Surfaces (light) */
  --bg: 0 0% 100%;
  --surface: 0 0% 98%;
  --card: 0 0% 100%;
  --popover: 0 0% 100%;
  --border: 0 0% 85%;
  --input: 0 0% 85%;

  /* Foreground */
  --foreground: 0 0% 7%;
  --muted: 0 0% 94%;
  --muted-foreground: 0 0% 38%;

  /* Brand: Bowdoin Black/White primary; approved dark accents */
  /* Bowdoin Black ≈ #231F20 → hsl(0 0% 14%) approximated via tuned contrast */
  --primary: 0 0% 10%;
  --primary-foreground: 0 0% 100%;

  /* Atlantic blue #00506A ≈ hsl(193 100% 21%) tuned for AA on white as filled button */
  --secondary: 193 100% 21%;
  --secondary-foreground: 0 0% 100%;

  /* Spruce teal #1D5C57 ≈ hsl(174 51% 24%) */
  --accent: 174 51% 24%;
  --accent-foreground: 0 0% 100%;

  --destructive: 0 65% 45%;
  --destructive-foreground: 0 0% 100%;

  /* Focus ring must meet ≥3:1 vs adjacent background */
  --ring: 210 10% 25%;
  --focus: 210 10% 25%;

  /* Motion tokens */
  --ease-out: cubic-bezier(.17,.67,.29,.99);
  --dur-1: 120ms;
  --dur-2: 220ms;

  /* Radii */
  --radius: 0.5rem;
  --radius-lg: 0.6rem;
  --radius-md: 0.5rem;
  --radius-sm: 0.375rem;

  /* Effects */
  --shadow-card: 0 8px 24px rgba(0,0,0,0.12);
  --animate-skeleton: skeleton 1.2s ease-in-out infinite;
}

.dark {
  /* Surfaces (dark) */
  --bg: 0 0% 6%;
  --surface: 0 0% 10%;
  --card: 0 0% 11%;
  --popover: 0 0% 10%;
  --border: 0 0% 23%;
  --input: 0 0% 27%;

  --foreground: 0 0% 98%;
  --muted: 0 0% 16%;
  --muted-foreground: 0 0% 70%;

  /* Invert primary for wordmark-on-dark */
  --primary: 0 0% 100%;
  --primary-foreground: 0 0% 0%;

  /* Slightly lightened accents for contrast on dark */
  --secondary: 193 80% 42%;
  --secondary-foreground: 0 0% 7%;

  --accent: 174 45% 46%;
  --accent-foreground: 0 0% 7%;

  --destructive: 0 70% 55%;
  --destructive-foreground: 0 0% 100%;

  --ring: 0 0% 90%;
  --focus: 0 0% 92%;

  --radius: 0.5rem;
  --radius-lg: 0.6rem;
  --radius-md: 0.5rem;
  --radius-sm: 0.375rem;

  --shadow-card: 0 8px 24px rgba(0,0,0,0.18);
  --animate-skeleton: skeleton 1.2s ease-in-out infinite;
}

/* Base typography respecting brand fallbacks */
@layer base {
  html { font-feature-settings: "kern" 1, "liga" 1; }
  body {
    @apply bg-bg text-foreground antialiased;
    font-family: var(--font-sans, "Mr Eaves", Arial, ui-sans-serif, system-ui);
  }
}

/* Skip link (visible on focus) */
.skip-link {
  position: absolute;
  inset-inline-start: 0.75rem;
  inset-block-start: -100%;
  z-index: 50;
  padding: .5rem .75rem;
  border-radius: .5rem;
  background: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  transition: transform var(--dur-2) var(--ease-out);
}
.skip-link:focus {
  transform: translateY(110%);
  outline: none;
  box-shadow: 0 0 0 4px hsl(var(--focus) / 0.35);
}

/* Focus-visible ring with ≥3:1 contrast */
:where(a,button,input,textarea,select,[role="button"],[tabindex]):focus-visible {
  outline: 2px solid hsl(var(--focus));
  outline-offset: 2px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

@keyframes skeleton {
  0%,
  100% {
    opacity: 0.55;
  }
  50% {
    opacity: 1;
  }
}

/* Card + skeleton utilities */
@layer utilities {
  .ui-card { @apply bg-card text-foreground border border-border rounded-lg shadow-card; }
  .skeleton { @apply animate-skeleton bg-muted; }
}
